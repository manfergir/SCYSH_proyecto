#ifndef COMMON_DEF_H
#define COMMON_DEF_H

#include "stdint.h"

/* -------------------- MQTT queue item -------------------- */
#ifndef MSG_TOPIC_SIZE
#define MSG_TOPIC_SIZE     64
#endif

#ifndef MSG_PAYLOAD_SIZE
#define MSG_PAYLOAD_SIZE   512
#endif

typedef struct
{
  char topic[ MSG_TOPIC_SIZE ];
  char payload[ MSG_PAYLOAD_SIZE ];
} MqttMsg_t;

/* Para osMessageQueueNew: item size */
#define QUEUE_TX_ITEM_SIZE   ( sizeof( MqttMsg_t ) )

/* -------------------- System Commands (UART -> ACC task) -------------------- */
typedef enum
{
  CMD_NONE = 0,
  CMD_START_CONTINUOUS,
  CMD_STOP_CONTINUOUS,
  CMD_FORCE_READ
} SystemCommand_t;

/* -------------------- Thread flags -------------------- */
/* Acelerómetro */
#define NOTE_RTC_WAKEUP   (1U << 0)   /* evento de botón/RTC para capturar */
#define NOTE_CMD_RX       (1U << 1)   /* hay comandos en qCmdRx */
#define NOTE_ACCEL_FIFO   (1U << 2)   /* watermark FIFO listo */

/* UART */
#define NOTE_UART_LINE_READY (1U << 8)  /* línea completa recibida */

/* -------------------- Acelerómetro config -------------------- */
#ifndef ACC_BLOCK_SAMPLES
#define ACC_BLOCK_SAMPLES  64
#endif

#ifndef ACC_CONT_SAMPLES
#define ACC_CONT_SAMPLES   1024
#endif

#ifndef ACC_FS_HZ
#define ACC_FS_HZ          52
#endif

#endif /* COMMON_DEF_H */
